// TODO: provide atomic operations for 64-bit types:
// __sync_bool_compare_and_swap_8